<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>注册</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/reg.css">
</head>
<body>
    <div class="reg-top">
        <div class="reg-topp">
            <h2>欢迎来到扇贝</h2>
            <a href="javascript:;">了解扇贝</a>
        </div>
    </div>

    <div class="reg-center">
        <table>
                <tr>
                    <td><input type="text" placeholder="手机号码" class="one" id="one"></td>
                    <td><input type="password" placeholder="密码" class="one" id="three"></td>
                    <td><input type="text" placeholder="短信验证码" class="two">
                    <a href="javscript:;" id="two">获取验证码</a>
                    </td>   
                </tr>
        </table>
    </div>
    <div class="reg-submit">
        <input type="submit" class="ipt" value="快速登陆/注册" id="ipt">
        <p>*未注册扇贝的手机号,登陆时将自动注册</p>
        <a href="login.html">账号密码登陆</a>
    </div>
 <p class="p">第三方登录</p>
    <div class="reg-bottom">
       
        <a href="javascript:;"><img src="img/wx.png" alt="">微信</a>
        <a href="javascript:;"><img src="img/qq.png" alt="">QQ</a>
        <a href="javascript:;"><img src="img/wb.png" alt="">微博</a>
    </div>

    <p class="zuidi">登陆代表您已经同意<a href="javscript:;"><<扇贝用户协议>></a></p>

</body>
</html>
<script>
    function q(id){
        return document.getElementById(id);
    }
    var reg = /^1[34578][0-9]{9}/;
    q('one').onblur = function(){
        if(!reg.test(this.value)&& this.value!=''){
            alert('您的手机号输入有误，请重新输入');
        }
    }
   q('two').onclick = function(){
        alert('获取验证码失败');
    }

        q('ipt').onclick = function(){
             
            let Xml = new XMLHttpRequest();
            //对象
            Xml.open('post','php/reg.php',true)
            // Xml.open('post','location.php',true);
            Xml.onreadystatechange = function (){
                if(Xml.readyState==4 && Xml.status==200){
                    let op = Xml.responseText;
                    if(op=='0'){
                      alert('注册失败');
                    }else{
                        alert('注册成功');
                        location.href = 'login.html';
                        
                    }
                }
            }
            // post方法
            Xml.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            let abstr = "one="+q('one').value+"&three="+q('three').value;
            Xml.send(abstr);
            // Xml.send();
        
        }


</script>